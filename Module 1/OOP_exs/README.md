# OOP in IR

This example will walk through how intermediate representations handles some OOP functionality we expect of most high level programming languages. The sample code can be found in `qubit.cpp`. It defines a simple `Qubit` class (which is probably not actually useful in any way, but is meant just as a simple example):

``` C++
class Qubit {
    private:
        double up;
        double down;
};
```

We will give the `Qubit` class some toy methods as well. While we've given `Qubit` spin amplitudes which can be expressed as doubles, here we'll just assume they are either 1 or 0 and implement a simple X and controlled X "gate". Finally, we want a simple way to visualize our `Qubit` instances.

``` C++
class Qubit {
    private:
        double up;
        double down;
    
    public:
        Qubit (double u, double d) {
            this->up = u;
            this->down = d;
        }

        void X() {
            double temp = this->up;
            this->up = this->down;
            this->down = temp;
        }

        void CX(Qubit control) {
            if (control.down) {
                this->X();
            }
        }

        void print() {
            std::cout << "Spin Up: " << this->up << "\n";
            std::cout << "Spin Down: " << this->down << "\n";
        }
};
```

The last part of the code is just using this class by instantiating a few objects and passing them through our fake "controlled not" gate.

``` C++
int main() {
    Qubit q1 = Qubit(1, 0);
    Qubit q2 = Qubit(0, 1);

    q1.CX(q2);

    q1.print();
    q2.print();
}
```

As expected, we receive this output in the terminal.

```C
Spin Up: 0
Spin Down: 1
Spin Up: 0
Spin Down: 1
```

Now, let's dive into the stages of compilation which we pass through before reaching IR. Just as in our other C++ examples, we can use a command to print out these stages. We type `clang++ -ccc-print-phases qubit.cpp`, and we can see the phases:

``` C++
            +- 0: input, "qubit.cpp", c++
         +- 1: preprocessor, {0}, c++-cpp-output
      +- 2: compiler, {1}, ir
   +- 3: backend, {2}, assembler
+- 4: assembler, {3}, object
5: linker, {4}, image
```

We are most interested in stages 1 and 2. To get some insight into how our input is preprocessed and then compiled, we can first examine the token stream generated by the Lexical Analyzer. Similar to the last C/C++ example, this is done with `clang++ -c -Xclang -dump-tokens qubit.cpp`, which turns our input code into the following token stream:

``` C++
class 'class'             [StartOfLine]                   Loc=<qubit.cpp:3:1>
identifier 'Qubit'                       [LeadingSpace]   Loc=<qubit.cpp:3:7>
l_brace '{'                              [LeadingSpace]   Loc=<qubit.cpp:3:13>
private 'private'         [StartOfLine]  [LeadingSpace]   Loc=<qubit.cpp:4:5>
colon ':'                                                 Loc=<qubit.cpp:4:12>
double 'double'           [StartOfLine] [LeadingSpace]    Loc=<qubit.cpp:5:9>
identifier 'up'                         [LeadingSpace]    Loc=<qubit.cpp:5:16>
semi ';'                Loc=<qubit.cpp:5:18>
double 'double'  [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:6:9>
identifier 'down'        [LeadingSpace] Loc=<qubit.cpp:6:16>
semi ';'                Loc=<qubit.cpp:6:20>
public 'public'  [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:8:5>
colon ':'               Loc=<qubit.cpp:8:11>
identifier 'Qubit'       [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:9:9>
l_paren '('      [LeadingSpace] Loc=<qubit.cpp:9:15>
double 'double'         Loc=<qubit.cpp:9:16>
identifier 'u'   [LeadingSpace] Loc=<qubit.cpp:9:23>
comma ','               Loc=<qubit.cpp:9:24>
double 'double'  [LeadingSpace] Loc=<qubit.cpp:9:26>
identifier 'd'   [LeadingSpace] Loc=<qubit.cpp:9:33>
r_paren ')'             Loc=<qubit.cpp:9:34>
l_brace '{'      [LeadingSpace] Loc=<qubit.cpp:9:36>
this 'this'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:10:13>
arrow '->'              Loc=<qubit.cpp:10:17>
identifier 'up'         Loc=<qubit.cpp:10:19>
equal '='        [LeadingSpace] Loc=<qubit.cpp:10:22>
identifier 'u'   [LeadingSpace] Loc=<qubit.cpp:10:24>
semi ';'                Loc=<qubit.cpp:10:25>
this 'this'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:11:13>
arrow '->'              Loc=<qubit.cpp:11:17>
identifier 'down'               Loc=<qubit.cpp:11:19>
equal '='        [LeadingSpace] Loc=<qubit.cpp:11:24>
identifier 'd'   [LeadingSpace] Loc=<qubit.cpp:11:26>
semi ';'                Loc=<qubit.cpp:11:27>
r_brace '}'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:12:9>
void 'void'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:14:9>
identifier 'X'   [LeadingSpace] Loc=<qubit.cpp:14:14>
l_paren '('             Loc=<qubit.cpp:14:15>
r_paren ')'             Loc=<qubit.cpp:14:16>
l_brace '{'      [LeadingSpace] Loc=<qubit.cpp:14:18>
double 'double'  [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:15:13>
identifier 'temp'        [LeadingSpace] Loc=<qubit.cpp:15:20>
equal '='        [LeadingSpace] Loc=<qubit.cpp:15:25>
this 'this'      [LeadingSpace] Loc=<qubit.cpp:15:27>
arrow '->'              Loc=<qubit.cpp:15:31>
identifier 'up'         Loc=<qubit.cpp:15:33>
semi ';'                Loc=<qubit.cpp:15:35>
this 'this'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:16:13>
arrow '->'              Loc=<qubit.cpp:16:17>
identifier 'up'         Loc=<qubit.cpp:16:19>
equal '='        [LeadingSpace] Loc=<qubit.cpp:16:22>
this 'this'      [LeadingSpace] Loc=<qubit.cpp:16:24>
arrow '->'              Loc=<qubit.cpp:16:28>
identifier 'down'               Loc=<qubit.cpp:16:30>
semi ';'                Loc=<qubit.cpp:16:34>
this 'this'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:17:13>
arrow '->'              Loc=<qubit.cpp:17:17>
identifier 'down'               Loc=<qubit.cpp:17:19>
equal '='        [LeadingSpace] Loc=<qubit.cpp:17:24>
identifier 'temp'        [LeadingSpace] Loc=<qubit.cpp:17:26>
semi ';'                Loc=<qubit.cpp:17:30>
r_brace '}'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:18:9>
void 'void'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:20:9>
identifier 'CX'  [LeadingSpace] Loc=<qubit.cpp:20:14>
l_paren '('             Loc=<qubit.cpp:20:16>
identifier 'Qubit'              Loc=<qubit.cpp:20:17>
identifier 'control'     [LeadingSpace] Loc=<qubit.cpp:20:23>
r_paren ')'             Loc=<qubit.cpp:20:30>
l_brace '{'      [LeadingSpace] Loc=<qubit.cpp:20:32>
if 'if'  [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:21:13>
l_paren '('      [LeadingSpace] Loc=<qubit.cpp:21:16>
identifier 'control'            Loc=<qubit.cpp:21:17>
period '.'              Loc=<qubit.cpp:21:24>
identifier 'down'               Loc=<qubit.cpp:21:25>
r_paren ')'             Loc=<qubit.cpp:21:29>
l_brace '{'      [LeadingSpace] Loc=<qubit.cpp:21:31>
this 'this'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:22:17>
arrow '->'              Loc=<qubit.cpp:22:21>
identifier 'X'          Loc=<qubit.cpp:22:23>
l_paren '('             Loc=<qubit.cpp:22:24>
r_paren ')'             Loc=<qubit.cpp:22:25>
semi ';'                Loc=<qubit.cpp:22:26>
r_brace '}'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:23:13>
r_brace '}'      [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:24:9>
r_brace '}'      [StartOfLine]  Loc=<qubit.cpp:30:1>
semi ';'                Loc=<qubit.cpp:30:2>
int 'int'        [StartOfLine]  Loc=<qubit.cpp:32:1>
identifier 'main'        [LeadingSpace] Loc=<qubit.cpp:32:5>
l_paren '('             Loc=<qubit.cpp:32:9>
r_paren ')'             Loc=<qubit.cpp:32:10>
l_brace '{'      [LeadingSpace] Loc=<qubit.cpp:32:12>
identifier 'Qubit'       [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:33:5>
identifier 'q1'  [LeadingSpace] Loc=<qubit.cpp:33:11>
equal '='        [LeadingSpace] Loc=<qubit.cpp:33:14>
identifier 'Qubit'       [LeadingSpace] Loc=<qubit.cpp:33:16>
l_paren '('             Loc=<qubit.cpp:33:21>
numeric_constant '1'            Loc=<qubit.cpp:33:22>
comma ','               Loc=<qubit.cpp:33:23>
numeric_constant '0'     [LeadingSpace] Loc=<qubit.cpp:33:25>
r_paren ')'             Loc=<qubit.cpp:33:26>
semi ';'                Loc=<qubit.cpp:33:27>
identifier 'Qubit'       [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:34:5>
identifier 'q2'  [LeadingSpace] Loc=<qubit.cpp:34:11>
equal '='        [LeadingSpace] Loc=<qubit.cpp:34:14>
identifier 'Qubit'       [LeadingSpace] Loc=<qubit.cpp:34:16>
l_paren '('             Loc=<qubit.cpp:34:21>
numeric_constant '0'            Loc=<qubit.cpp:34:22>
comma ','               Loc=<qubit.cpp:34:23>
numeric_constant '1'     [LeadingSpace] Loc=<qubit.cpp:34:25>
r_paren ')'             Loc=<qubit.cpp:34:26>
semi ';'                Loc=<qubit.cpp:34:27>
identifier 'q1'  [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:36:5>
period '.'              Loc=<qubit.cpp:36:7>
identifier 'CX'         Loc=<qubit.cpp:36:8>
l_paren '('             Loc=<qubit.cpp:36:10>
identifier 'q2'         Loc=<qubit.cpp:36:11>
r_paren ')'             Loc=<qubit.cpp:36:13>
semi ';'                Loc=<qubit.cpp:36:14>
return 'return'  [StartOfLine] [LeadingSpace]   Loc=<qubit.cpp:41:5>
numeric_constant '0'     [LeadingSpace] Loc=<qubit.cpp:41:12>
semi ';'                Loc=<qubit.cpp:41:13>
r_brace '}'      [StartOfLine]  Loc=<qubit.cpp:42:1>
eof ''          Loc=<qubit.cpp:42:2>
```

Next comes the generation of the AST. We type `clang++ -c -Xclang -ast-dump qubit.cpp`, and get the output:

```C++



TranslationUnitDecl 0x5dcc38 <<invalid sloc>> <invalid sloc>
|-TypedefDecl 0x5dd510 <<invalid sloc>> <invalid sloc> implicit __int128_t '__int128'
| `-BuiltinType 0x5dd1d0 '__int128'
|-TypedefDecl 0x5dd580 <<invalid sloc>> <invalid sloc> implicit __uint128_t 'unsigned __int128'
| `-BuiltinType 0x5dd1f0 'unsigned __int128'
|-TypedefDecl 0x5dd8f8 <<invalid sloc>> <invalid sloc> implicit __NSConstantString '__NSConstantString_tag'
| `-RecordType 0x5dd670 '__NSConstantString_tag'
|   `-CXXRecord 0x5dd5d8 '__NSConstantString_tag'
|-TypedefDecl 0x5dd990 <<invalid sloc>> <invalid sloc> implicit __builtin_ms_va_list 'char *'
| `-PointerType 0x5dd950 'char *'
|   `-BuiltinType 0x5dccd0 'char'
|-TypedefDecl 0x61abd8 <<invalid sloc>> <invalid sloc> implicit __builtin_va_list '__va_list_tag [1]'
| `-ConstantArrayType 0x61ab80 '__va_list_tag [1]' 1 
|   `-RecordType 0x5dda80 '__va_list_tag'
|     `-CXXRecord 0x5dd9e8 '__va_list_tag'
|-CXXRecordDecl 0x61ac30 <qubit.cpp:3:1, line:30:1> line:3:7 referenced class Qubit definition
| |-DefinitionData pass_in_registers standard_layout trivially_copyable has_user_declared_ctor can_const_default_init
| | |-DefaultConstructor
| | |-CopyConstructor simple trivial has_const_param implicit_has_const_param
| | |-MoveConstructor exists simple trivial
| | |-CopyAssignment trivial has_const_param needs_implicit implicit_has_const_param
| | |-MoveAssignment exists simple trivial needs_implicit
| | `-Destructor simple irrelevant trivial
| |-CXXRecordDecl 0x61ad48 <col:1, col:7> col:7 implicit referenced class Qubit
| |-AccessSpecDecl 0x61add8 <line:4:5, col:12> col:5 private
| |-FieldDecl 0x61ae18 <line:5:9, col:16> col:16 referenced up 'double'
| |-FieldDecl 0x61ae80 <line:6:9, col:16> col:16 referenced down 'double'
| |-AccessSpecDecl 0x61aed0 <line:8:5, col:11> col:5 public
| |-CXXConstructorDecl 0x61b0a8 <line:9:9, line:12:9> line:9:9 used Qubit 'void (double, double)'
| | |-ParmVarDecl 0x61af10 <col:16, col:23> col:23 used u 'double'
| | |-ParmVarDecl 0x61af90 <col:26, col:33> col:33 used d 'double'
| | `-CompoundStmt 0x61b508 <col:36, line:12:9>
| |   |-BinaryOperator 0x61b450 <line:10:13, col:24> 'double' lvalue '='
| |   | |-MemberExpr 0x61b3e8 <col:13, col:19> 'double' lvalue ->up 0x61ae18
| |   | | `-CXXThisExpr 0x61b3d8 <col:13> 'Qubit *' this
| |   | `-ImplicitCastExpr 0x61b438 <col:24> 'double' <LValueToRValue>
| |   |   `-DeclRefExpr 0x61b418 <col:24> 'double' lvalue ParmVar 0x61af10 'u' 'double'
| |   `-BinaryOperator 0x61b4e8 <line:11:13, col:26> 'double' lvalue '='
| |     |-MemberExpr 0x61b480 <col:13, col:19> 'double' lvalue ->down 0x61ae80
| |     | `-CXXThisExpr 0x61b470 <col:13> 'Qubit *' this
| |     `-ImplicitCastExpr 0x61b4d0 <col:26> 'double' <LValueToRValue>
| |       `-DeclRefExpr 0x61b4b0 <col:26> 'double' lvalue ParmVar 0x61af90 'd' 'double'
| |-CXXMethodDecl 0x61b1a8 <line:14:9, line:18:9> line:14:14 used X 'void ()'
| | `-CompoundStmt 0x61b768 <col:18, line:18:9>
| |   |-DeclStmt 0x61b600 <line:15:13, col:35>
| |   | `-VarDecl 0x61b540 <col:13, col:33> col:20 used temp 'double' cinit
| |   |   `-ImplicitCastExpr 0x61b5e8 <col:27, col:33> 'double' <LValueToRValue>
| |   |     `-MemberExpr 0x61b5b8 <col:27, col:33> 'double' lvalue ->up 0x61ae18
| |   |       `-CXXThisExpr 0x61b5a8 <col:27> 'Qubit *' this
| |   |-BinaryOperator 0x61b6b0 <line:16:13, col:30> 'double' lvalue '='
| |   | |-MemberExpr 0x61b628 <col:13, col:19> 'double' lvalue ->up 0x61ae18
| |   | | `-CXXThisExpr 0x61b618 <col:13> 'Qubit *' this
| |   | `-ImplicitCastExpr 0x61b698 <col:24, col:30> 'double' <LValueToRValue>
| |   |   `-MemberExpr 0x61b668 <col:24, col:30> 'double' lvalue ->down 0x61ae80
| |   |     `-CXXThisExpr 0x61b658 <col:24> 'Qubit *' this
| |   `-BinaryOperator 0x61b748 <line:17:13, col:26> 'double' lvalue '='
| |     |-MemberExpr 0x61b6e0 <col:13, col:19> 'double' lvalue ->down 0x61ae80
| |     | `-CXXThisExpr 0x61b6d0 <col:13> 'Qubit *' this
| |     `-ImplicitCastExpr 0x61b730 <col:26> 'double' <LValueToRValue>
| |       `-DeclRefExpr 0x61b710 <col:26> 'double' lvalue Var 0x61b540 'temp' 'double'
| |-CXXMethodDecl 0x61b318 <line:20:9, line:24:9> line:20:14 used CX 'void (Qubit)'
| | |-ParmVarDecl 0x61b258 <col:17, col:23> col:23 used control 'Qubit'
| | `-CompoundStmt 0x61b960 <col:32, line:24:9>
| |   `-IfStmt 0x61b948 <line:21:13, line:23:13>
| |     |-ImplicitCastExpr 0x61b7f8 <line:21:17, col:25> 'bool' <FloatingToBoolean>
| |     | `-ImplicitCastExpr 0x61b7e0 <col:17, col:25> 'double' <LValueToRValue>
| |     |   `-MemberExpr 0x61b7b0 <col:17, col:25> 'double' lvalue .down 0x61ae80
| |     |     `-DeclRefExpr 0x61b790 <col:17> 'Qubit' lvalue ParmVar 0x61b258 'control' 'Qubit'
| |     `-CompoundStmt 0x61b930 <col:31, line:23:13>
| |       `-CXXMemberCallExpr 0x61b910 <line:22:17, col:25> 'void'
| |         `-MemberExpr 0x61b8e0 <col:17, col:23> '<bound member function type>' ->X 0x61b1a8
| |           `-CXXThisExpr 0x61b8d0 <col:17> 'Qubit *' this
| |-CXXConstructorDecl 0x649e88 <line:3:7> col:7 implicit used constexpr Qubit 'void (const Qubit &) noexcept' inline default trivial
| | |-ParmVarDecl 0x649f98 <col:7> col:7 used 'const Qubit &'
| | |-CXXCtorInitializer Field 0x61ae18 'up' 'double'
| | | `-ImplicitCastExpr 0x64a8c8 <col:7> 'double' <LValueToRValue>
| | |   `-MemberExpr 0x64a880 <col:7> 'const double' lvalue .up 0x61ae18
| | |     `-DeclRefExpr 0x64a860 <col:7> 'const Qubit' lvalue ParmVar 0x649f98 '' 'const Qubit &'
| | |-CXXCtorInitializer Field 0x61ae80 'down' 'double'
| | | `-ImplicitCastExpr 0x64a970 <col:7> 'double' <LValueToRValue>
| | |   `-MemberExpr 0x64a928 <col:7> 'const double' lvalue .down 0x61ae80
| | |     `-DeclRefExpr 0x64a908 <col:7> 'const Qubit' lvalue ParmVar 0x649f98 '' 'const Qubit &'
| | `-CompoundStmt 0x64a9c0 <col:7>
| |-CXXConstructorDecl 0x64a038 <col:7> col:7 implicit used constexpr Qubit 'void (Qubit &&) noexcept' inline default trivial
| | |-ParmVarDecl 0x64a148 <col:7> col:7 used 'Qubit &&'
| | |-CXXCtorInitializer Field 0x61ae18 'up' 'double'
| | | `-ImplicitCastExpr 0x64a428 <col:7> 'double' <LValueToRValue>
| | |   `-MemberExpr 0x64a3e0 <col:7> 'double' xvalue .up 0x61ae18
| | |     `-CXXStaticCastExpr 0x64a3b0 <col:7> 'Qubit' xvalue static_cast<class Qubit &&> <NoOp>
| | |       `-DeclRefExpr 0x64a380 <col:7> 'Qubit' lvalue ParmVar 0x64a148 '' 'Qubit &&'
| | |-CXXCtorInitializer Field 0x61ae80 'down' 'double'
| | | `-ImplicitCastExpr 0x64a510 <col:7> 'double' <LValueToRValue>
| | |   `-MemberExpr 0x64a4c8 <col:7> 'double' xvalue .down 0x61ae80
| | |     `-CXXStaticCastExpr 0x64a498 <col:7> 'Qubit' xvalue static_cast<class Qubit &&> <NoOp>
| | |       `-DeclRefExpr 0x64a468 <col:7> 'Qubit' lvalue ParmVar 0x64a148 '' 'Qubit &&'
| | `-CompoundStmt 0x64a560 <col:7>
| `-CXXDestructorDecl 0x64a228 <col:7> col:7 implicit referenced ~Qubit 'void () noexcept' inline default trivial
`-FunctionDecl 0x61b9d0 <line:32:1, line:42:1> line:32:5 main 'int ()'
  `-CompoundStmt 0x64aa30 <col:12, line:42:1>
    |-DeclStmt 0x64a5b8 <line:33:5, col:27>
    | `-VarDecl 0x649da0 <col:5, col:26> col:11 used q1 'Qubit' cinit
    |   `-ExprWithCleanups 0x64a5a0 <col:16, col:26> 'Qubit'
    |     `-CXXConstructExpr 0x64a570 <col:16, col:26> 'Qubit' 'void (Qubit &&) noexcept' elidable
    |       `-MaterializeTemporaryExpr 0x64a338 <col:16, col:26> 'Qubit' xvalue
    |         `-CXXTemporaryObjectExpr 0x64a1e8 <col:16, col:26> 'Qubit' 'void (double, double)'
    |           |-ImplicitCastExpr 0x64a1b8 <col:22> 'double' <IntegralToFloating>
    |           | `-IntegerLiteral 0x649e18 <col:22> 'int' 1
    |           `-ImplicitCastExpr 0x64a1d0 <col:25> 'double' <IntegralToFloating>
    |             `-IntegerLiteral 0x649e38 <col:25> 'int' 0
    |-DeclStmt 0x64a768 <line:34:5, col:27>
    | `-VarDecl 0x64a5e0 <col:5, col:26> col:11 used q2 'Qubit' cinit
    |   `-ExprWithCleanups 0x64a750 <col:16, col:26> 'Qubit'
    |     `-CXXConstructExpr 0x64a720 <col:16, col:26> 'Qubit' 'void (Qubit &&) noexcept' elidable
    |       `-MaterializeTemporaryExpr 0x64a708 <col:16, col:26> 'Qubit' xvalue
    |         `-CXXTemporaryObjectExpr 0x64a6c8 <col:16, col:26> 'Qubit' 'void (double, double)'
    |           |-ImplicitCastExpr 0x64a698 <col:22> 'double' <IntegralToFloating>
    |           | `-IntegerLiteral 0x64a658 <col:22> 'int' 0
    |           `-ImplicitCastExpr 0x64a6b0 <col:25> 'double' <IntegralToFloating>
    |             `-IntegerLiteral 0x64a678 <col:25> 'int' 1
    |-CXXMemberCallExpr 0x64a7f0 <line:36:5, col:13> 'void'
    | |-MemberExpr 0x64a7a0 <col:5, col:8> '<bound member function type>' .CX 0x61b318
    | | `-DeclRefExpr 0x64a780 <col:5> 'Qubit' lvalue Var 0x649da0 'q1' 'Qubit'
    | `-CXXConstructExpr 0x64a9d0 <col:11> 'Qubit' 'void (const Qubit &) noexcept'
    |   `-ImplicitCastExpr 0x64a818 <col:11> 'const Qubit' lvalue <NoOp>
    |     `-DeclRefExpr 0x64a7d0 <col:11> 'Qubit' lvalue Var 0x64a5e0 'q2' 'Qubit'
    `-ReturnStmt 0x64aa20 <line:41:5, col:12>
      `-IntegerLiteral 0x64aa00 <col:12> 'int' 0
```

Finally, here is the IR:

``` C++
; ModuleID = 'qubit.cpp'
source_filename = "qubit.cpp"
target datalayout = "e-m:e-p270:32:32-p271:32:32-p272:64:64-i64:64-f80:128-n8:16:32:64-S128"
target triple = "x86_64-pc-linux-gnu"

%"class.std::ios_base::Init" = type { i8 }
%"class.std::basic_ostream" = type { i32 (...)**, %"class.std::basic_ios" }
%"class.std::basic_ios" = type { %"class.std::ios_base", %"class.std::basic_ostream"*, i8, i8, %"class.std::basic_streambuf"*, %"class.std::ctype"*, %"class.std::num_put"*, %"class.std::num_get"* }
%"class.std::ios_base" = type { i32 (...)**, i64, i64, i32, i32, i32, %"struct.std::ios_base::_Callback_list"*, %"struct.std::ios_base::_Words", [8 x %"struct.std::ios_base::_Words"], i32, %"struct.std::ios_base::_Words"*, %"class.std::locale" }
%"struct.std::ios_base::_Callback_list" = type { %"struct.std::ios_base::_Callback_list"*, void (i32, %"class.std::ios_base"*, i32)*, i32, i32 }
%"struct.std::ios_base::_Words" = type { i8*, i64 }
%"class.std::locale" = type { %"class.std::locale::_Impl"* }
%"class.std::locale::_Impl" = type { i32, %"class.std::locale::facet"**, i64, %"class.std::locale::facet"**, i8** }
%"class.std::locale::facet" = type <{ i32 (...)**, i32, [4 x i8] }>
%"class.std::basic_streambuf" = type { i32 (...)**, i8*, i8*, i8*, i8*, i8*, i8*, %"class.std::locale" }
%"class.std::ctype" = type <{ %"class.std::locale::facet.base", [4 x i8], %struct.__locale_struct*, i8, [7 x i8], i32*, i32*, i16*, i8, [256 x i8], [256 x i8], i8, [6 x i8] }>
%"class.std::locale::facet.base" = type <{ i32 (...)**, i32 }>
%struct.__locale_struct = type { [13 x %struct.__locale_data*], i16*, i32*, i32*, [13 x i8*] }
%struct.__locale_data = type opaque
%"class.std::num_put" = type { %"class.std::locale::facet.base", [4 x i8] }
%"class.std::num_get" = type { %"class.std::locale::facet.base", [4 x i8] }
%class.Qubit = type { double, double }

$_ZN5QubitC2Edd = comdat any

$_ZN5Qubit2CXES_ = comdat any

$_ZN5Qubit5printEv = comdat any

$_ZN5Qubit1XEv = comdat any

@_ZStL8__ioinit = internal global %"class.std::ios_base::Init" zeroinitializer, align 1
@__dso_handle = external hidden global i8
@_ZSt4cout = external dso_local global %"class.std::basic_ostream", align 8
@.str = private unnamed_addr constant [10 x i8] c"Spin Up: \00", align 1
@.str.1 = private unnamed_addr constant [2 x i8] c"\0A\00", align 1
@.str.2 = private unnamed_addr constant [12 x i8] c"Spin Down: \00", align 1
@llvm.global_ctors = appending global [1 x { i32, void ()*, i8* }] [{ i32, void ()*, i8* } { i32 65535, void ()* @_GLOBAL__sub_I_qubit.cpp, i8* null }]

; Function Attrs: noinline uwtable
define internal void @__cxx_global_var_init() #0 section ".text.startup" {
  call void @_ZNSt8ios_base4InitC1Ev(%"class.std::ios_base::Init"* @_ZStL8__ioinit)
  %1 = call i32 @__cxa_atexit(void (i8*)* bitcast (void (%"class.std::ios_base::Init"*)* @_ZNSt8ios_base4InitD1Ev to void (i8*)*), i8* getelementptr inbounds (%"class.std::ios_base::Init", %"class.std::ios_base::Init"* @_ZStL8__ioinit, i32 0, i32 0), i8* @__dso_handle) #3
  ret void
}

declare dso_local void @_ZNSt8ios_base4InitC1Ev(%"class.std::ios_base::Init"*) unnamed_addr #1

; Function Attrs: nounwind
declare dso_local void @_ZNSt8ios_base4InitD1Ev(%"class.std::ios_base::Init"*) unnamed_addr #2

; Function Attrs: nounwind
declare dso_local i32 @__cxa_atexit(void (i8*)*, i8*, i8*) #3

; Function Attrs: noinline norecurse optnone uwtable
define dso_local i32 @main() #4 {
  %1 = alloca %class.Qubit, align 8
  %2 = alloca %class.Qubit, align 8
  %3 = alloca %class.Qubit, align 8
  call void @_ZN5QubitC2Edd(%class.Qubit* %1, double 1.000000e+00, double 0.000000e+00)
  call void @_ZN5QubitC2Edd(%class.Qubit* %2, double 0.000000e+00, double 1.000000e+00)
  %4 = bitcast %class.Qubit* %3 to i8*
  %5 = bitcast %class.Qubit* %1 to i8*
  call void @llvm.memcpy.p0i8.p0i8.i64(i8* align 8 %4, i8* align 8 %5, i64 16, i1 false)
  %6 = bitcast %class.Qubit* %3 to { double, double }*
  %7 = getelementptr inbounds { double, double }, { double, double }* %6, i32 0, i32 0
  %8 = load double, double* %7, align 8
  %9 = getelementptr inbounds { double, double }, { double, double }* %6, i32 0, i32 1
  %10 = load double, double* %9, align 8
  call void @_ZN5Qubit2CXES_(%class.Qubit* %2, double %8, double %10)
  call void @_ZN5Qubit5printEv(%class.Qubit* %1)
  call void @_ZN5Qubit5printEv(%class.Qubit* %2)
  ret i32 0
}

; Function Attrs: noinline nounwind optnone uwtable
define linkonce_odr dso_local void @_ZN5QubitC2Edd(%class.Qubit* %0, double %1, double %2) unnamed_addr #5 comdat align 2 {
  %4 = alloca %class.Qubit*, align 8
  %5 = alloca double, align 8
  %6 = alloca double, align 8
  store %class.Qubit* %0, %class.Qubit** %4, align 8
  store double %1, double* %5, align 8
  store double %2, double* %6, align 8
  %7 = load %class.Qubit*, %class.Qubit** %4, align 8
  %8 = load double, double* %5, align 8
  %9 = getelementptr inbounds %class.Qubit, %class.Qubit* %7, i32 0, i32 0
  store double %8, double* %9, align 8
  %10 = load double, double* %6, align 8
  %11 = getelementptr inbounds %class.Qubit, %class.Qubit* %7, i32 0, i32 1
  store double %10, double* %11, align 8
  ret void
}

; Function Attrs: noinline optnone uwtable
define linkonce_odr dso_local void @_ZN5Qubit2CXES_(%class.Qubit* %0, double %1, double %2) #6 comdat align 2 {
  %4 = alloca %class.Qubit, align 8
  %5 = alloca %class.Qubit*, align 8
  %6 = bitcast %class.Qubit* %4 to { double, double }*
  %7 = getelementptr inbounds { double, double }, { double, double }* %6, i32 0, i32 0
  store double %1, double* %7, align 8
  %8 = getelementptr inbounds { double, double }, { double, double }* %6, i32 0, i32 1
  store double %2, double* %8, align 8
  store %class.Qubit* %0, %class.Qubit** %5, align 8
  %9 = load %class.Qubit*, %class.Qubit** %5, align 8
  %10 = getelementptr inbounds %class.Qubit, %class.Qubit* %4, i32 0, i32 1
  %11 = load double, double* %10, align 8
  %12 = fcmp une double %11, 0.000000e+00
  br i1 %12, label %13, label %14

13:                                               ; preds = %3
  call void @_ZN5Qubit1XEv(%class.Qubit* %9)
  br label %14

14:                                               ; preds = %13, %3
  ret void
}

; Function Attrs: argmemonly nounwind willreturn
declare void @llvm.memcpy.p0i8.p0i8.i64(i8* noalias nocapture writeonly, i8* noalias nocapture readonly, i64, i1 immarg) #7

; Function Attrs: noinline optnone uwtable
define linkonce_odr dso_local void @_ZN5Qubit5printEv(%class.Qubit* %0) #6 comdat align 2 {
  %2 = alloca %class.Qubit*, align 8
  store %class.Qubit* %0, %class.Qubit** %2, align 8
  %3 = load %class.Qubit*, %class.Qubit** %2, align 8
  %4 = call dereferenceable(272) %"class.std::basic_ostream"* @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%"class.std::basic_ostream"* dereferenceable(272) @_ZSt4cout, i8* getelementptr inbounds ([10 x i8], [10 x i8]* @.str, i64 0, i64 0))
  %5 = getelementptr inbounds %class.Qubit, %class.Qubit* %3, i32 0, i32 0
  %6 = load double, double* %5, align 8
  %7 = call dereferenceable(272) %"class.std::basic_ostream"* @_ZNSolsEd(%"class.std::basic_ostream"* %4, double %6)
  %8 = call dereferenceable(272) %"class.std::basic_ostream"* @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%"class.std::basic_ostream"* dereferenceable(272) %7, i8* getelementptr inbounds ([2 x i8], [2 x i8]* @.str.1, i64 0, i64 0))
  %9 = call dereferenceable(272) %"class.std::basic_ostream"* @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%"class.std::basic_ostream"* dereferenceable(272) @_ZSt4cout, i8* getelementptr inbounds ([12 x i8], [12 x i8]* @.str.2, i64 0, i64 0))
  %10 = getelementptr inbounds %class.Qubit, %class.Qubit* %3, i32 0, i32 1
  %11 = load double, double* %10, align 8
  %12 = call dereferenceable(272) %"class.std::basic_ostream"* @_ZNSolsEd(%"class.std::basic_ostream"* %9, double %11)
  %13 = call dereferenceable(272) %"class.std::basic_ostream"* @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%"class.std::basic_ostream"* dereferenceable(272) %12, i8* getelementptr inbounds ([2 x i8], [2 x i8]* @.str.1, i64 0, i64 0))
  ret void
}

; Function Attrs: noinline nounwind optnone uwtable
define linkonce_odr dso_local void @_ZN5Qubit1XEv(%class.Qubit* %0) #5 comdat align 2 {
  %2 = alloca %class.Qubit*, align 8
  %3 = alloca double, align 8
  store %class.Qubit* %0, %class.Qubit** %2, align 8
  %4 = load %class.Qubit*, %class.Qubit** %2, align 8
  %5 = getelementptr inbounds %class.Qubit, %class.Qubit* %4, i32 0, i32 0
  %6 = load double, double* %5, align 8
  store double %6, double* %3, align 8
  %7 = getelementptr inbounds %class.Qubit, %class.Qubit* %4, i32 0, i32 1
  %8 = load double, double* %7, align 8
  %9 = getelementptr inbounds %class.Qubit, %class.Qubit* %4, i32 0, i32 0
  store double %8, double* %9, align 8
  %10 = load double, double* %3, align 8
  %11 = getelementptr inbounds %class.Qubit, %class.Qubit* %4, i32 0, i32 1
  store double %10, double* %11, align 8
  ret void
}

declare dso_local dereferenceable(272) %"class.std::basic_ostream"* @_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc(%"class.std::basic_ostream"* dereferenceable(272), i8*) #1

declare dso_local dereferenceable(272) %"class.std::basic_ostream"* @_ZNSolsEd(%"class.std::basic_ostream"*, double) #1

; Function Attrs: noinline uwtable
define internal void @_GLOBAL__sub_I_qubit.cpp() #0 section ".text.startup" {
  call void @__cxx_global_var_init()
  ret void
}

attributes #0 = { noinline uwtable "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "frame-pointer"="all" "less-precise-fpmad"="false" "min-legal-vector-width"="0" "no-infs-fp-math"="false" "no-jump-tables"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "stack-protector-buffer-size"="8" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #1 = { "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "frame-pointer"="all" "less-precise-fpmad"="false" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "stack-protector-buffer-size"="8" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #2 = { nounwind "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "frame-pointer"="all" "less-precise-fpmad"="false" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "stack-protector-buffer-size"="8" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #3 = { nounwind }
attributes #4 = { noinline norecurse optnone uwtable "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "frame-pointer"="all" "less-precise-fpmad"="false" "min-legal-vector-width"="0" "no-infs-fp-math"="false" "no-jump-tables"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "stack-protector-buffer-size"="8" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #5 = { noinline nounwind optnone uwtable "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "frame-pointer"="all" "less-precise-fpmad"="false" "min-legal-vector-width"="0" "no-infs-fp-math"="false" "no-jump-tables"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "stack-protector-buffer-size"="8" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #6 = { noinline optnone uwtable "correctly-rounded-divide-sqrt-fp-math"="false" "disable-tail-calls"="false" "frame-pointer"="all" "less-precise-fpmad"="false" "min-legal-vector-width"="0" "no-infs-fp-math"="false" "no-jump-tables"="false" "no-nans-fp-math"="false" "no-signed-zeros-fp-math"="false" "no-trapping-math"="false" "stack-protector-buffer-size"="8" "target-cpu"="x86-64" "target-features"="+cx8,+fxsr,+mmx,+sse,+sse2,+x87" "unsafe-fp-math"="false" "use-soft-float"="false" }
attributes #7 = { argmemonly nounwind willreturn }

!llvm.module.flags = !{!0}
!llvm.ident = !{!1}

!0 = !{i32 1, !"wchar_size", i32 4}
!1 = !{!"clang version 10.0.0-4ubuntu1 "}
```
